---
title: 为什么群聊模式默认用沙盒？聊聊 Openclaw 的安全设计
description: 深入解析 Openclaw 在群聊中使用 Docker 沙盒的原因，以及如何根据自己的需求切换到主机模式。
pubDate: 2026-02-19
updated: 2026-02-19
draft: false
categories:
  - 技术原理
tags:
  - Openclaw
  - Docker
  - 安全
  - 沙盒
---

# 为什么群聊模式默认用沙盒？聊聊 Openclaw 的安全设计

有朋友问我：为什么 Openclaw 在群聊里默认用 Docker 沙盒运行？能不能改成直接用主机资源？今天来聊聊这个设计背后的思考。

## 群聊的特殊性

和私聊不同，Telegram 群组里有**多个用户**可以同时和机器人互动。这就带来了几个问题：

1. **谁来负责？** 群成员 A 执行的命令，结果算谁的？
2. **恶意指令** 如果有人故意发 `rm -rf /` 怎么办？
3. **资源争抢** 几十个人同时让机器人干活，服务器扛得住吗？

## 沙盒模式的核心优势

### 1. 安全隔离

这是最关键的一点。Docker 沙盒就像给机器人穿了一层"防护服"：

- 群里的命令不会直接影响 VPS 本身
- 即使执行了危险操作，也只是影响沙盒内部
- 宿主机（你的服务器）安全不受影响

### 2. 权限限制

在沙盒里，Openclaw 只能做有限的事情：

- 读写指定的工作目录
- 有限的网络访问（需要配置 gateway）
- 不能随意修改系统设置

### 3. 风险可控

即使群里有人故意捣乱：

- 最多毁掉沙盒环境
- 不会波及到你的服务器
- 重启 Docker 就能恢复

## 如何切换到主机模式？

如果你觉得沙盒太麻烦，想要更自由的操作，可以修改配置。

找到 `~/.openclaw/openclaw.json`，改成这样：

```json
{
  "agents": {
    "main": {
      "runtime": "host"
    }
  }
}
```

### runtime 选项说明

| 值 | 说明 | 安全性 |
|---|---|---|
| `sandbox` | Docker 沙盒（默认） | 高 |
| `host` | 直接用主机 | 低 |

## 安全 vs 便利，这是一个权衡

### 选沙盒模式 ✅

- 服务器上有重要数据
- 群成员不可信
- 不怕麻烦，想要安全

### 选主机模式 ⚠️

- 群成员都是自己人
- 需要执行复杂的本地任务
- 愿意承担一定风险

## 总结

默认用沙盒不是因为能力有限，而是**安全第一**。毕竟群聊是什么人都能说话的，保护好服务器永远是第一位的。

当然，如果你充分信任群里的成员，并且需要更强大的执行力，完全可以改成 host 模式。只是记得想清楚再做决定 🦞
